<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Adicionar Matéria</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/calendario_styles.css') }}">
</head>
<body class="page-body">
  
  <header class="page-header">
    <div class="header-top">
      <div class="header-brand">
        <img class="header-logo" src="https://api.builder.io/api/v1/image/assets/TEMP/fb4d5eed694b229a53829dcdc98665ec0db0d36c?width=558" alt="UNIP">
        <h1 class="header-title">Painel Administrativo</h1>
      </div>
      <div class="header-user">
        <div class="user-info-panel">
          <div class="user-name-text">{{ user.nome|title if user else 'José Zesinho' }}</div>
          <div class="user-email-text">{{ user.email if user else 'jose.zesinho37@docente.unip.br' }}</div>
        </div>
        <a href="{{ url_for('logout') }}" class="btn-logout">sair</a>
      </div>
    </div>
    <div class="header-submenu">
      <div class="submenu-wrapper">
        <svg class="icon-menu" width="25" height="19" viewBox="0 0 25 19" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.9919 6.66468H1M23.9919 1H1M23.9919 12.3294H1M23.9919 17.994H1" stroke="white" stroke-width="1.9993" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="submenu-text">Menu</span>
      </div>
    </div>
  </header>

  <main class="page-main">
    <div class="container-card">
      <div class="calendar-header">
        <h2 class="calendar-title">Calendário</h2>
      </div>
      
      <div class="add-section">
        <svg class="icon-add" width="62" height="62" viewBox="0 0 62 62" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M30.5527 5.55273V55.5527M5.55273 30.5527H55.5527" stroke="#2C8DFA" stroke-width="11.1047" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="add-text">Adicionar Matéria</span>
      </div>
      
      <div class="separator-line"></div>

      <div class="wizard-container">
        <div class="wizard-step-label">Etapa {{ step }} de 4</div>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="messages-area">
              {% for category, message in messages %}
                <div class="message-box message-{{ category }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        {% if step == 1 %}
        <form class="wizard-form" method="post">
          <input type="hidden" name="step" value="1" />
          
          <div class="form-field-group">
            <label class="field-label">Nome da Matéria:</label>
            <input class="field-input" name="nome" type="text" placeholder="Ex: Engenharia de Software" value="{{ wizard.nome or '' }}" required />
          </div>

          <div class="form-field-group">
            <label class="field-label">Professor Responsável</label>
            <select class="field-select" name="professor">
              <option value="">Selecione</option>
              <option value="José Zesinho" {% if wizard.professor == 'José Zesinho' %}selected{% endif %}>José Zesinho</option>
              <option value="Maria Silva" {% if wizard.professor == 'Maria Silva' %}selected{% endif %}>Maria Silva</option>
            </select>
          </div>

          <div class="form-field-group">
            <label class="field-label">Código Disciplina:</label>
            <input class="field-input field-half" name="codigo" type="text" placeholder="Ex: N78452" value="{{ wizard.codigo or '' }}" />
          </div>

          <div class="form-field-group">
            <label class="field-label">Carga Horária:</label>
            <input class="field-input field-half" name="carga_horaria" type="text" placeholder="Ex: 60h" value="{{ wizard.carga_horaria or '' }}" />
          </div>

          <div class="form-field-group">
            <label class="field-label">Modalidade</label>
            <select class="field-select field-medium" name="modalidade">
              <option value="">Selecione</option>
              <option value="Presencial" {% if wizard.modalidade == 'Presencial' %}selected{% endif %}>Presencial</option>
              <option value="EAD" {% if wizard.modalidade == 'EAD' %}selected{% endif %}>EAD</option>
              <option value="Híbrido" {% if wizard.modalidade == 'Híbrido' %}selected{% endif %}>Híbrido</option>
            </select>
          </div>

          <div class="form-actions">
            <a class="btn-action btn-cancel" href="{{ url_for('calendario_list') }}">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13 1L1 13M1 1L13 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Cancelar
            </a>
            <button class="btn-action btn-next" type="submit">
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 8.5H18M18 8.5L9.5 1M18 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Próximo
            </button>
          </div>
        </form>

        {% elif step == 2 %}
        <form class="wizard-form" method="post" enctype="multipart/form-data">
          <input type="hidden" name="step" value="2" />

          <div class="form-field-group">
            <label class="field-label">Ementa da Matéria</label>
            <div class="textarea-wrapper">
              <textarea class="field-textarea" name="ementa_resumo" rows="7" maxlength="1000" placeholder="Faça um breve resumo da ementa da disciplina, abordando o objetivo geral e os principais tópicos.">{{ wizard.ementa_resumo or '' }}</textarea>
              <span class="char-counter">0 / 1000 caracteres</span>
            </div>
          </div>

          <div class="form-field-group">
            <label class="field-label">Documento da Ementa Completa</label>
            <div class="file-upload-area">
              <input type="file" name="ementa_arquivo" id="ementa-file" accept=".pdf,.docx" class="file-input-hidden" />
              <label for="ementa-file" class="btn-file-select">Selecionar Arquivo</label>
              <span class="file-hint">*Apenas arquivos .pdf ou .docx</span>
            </div>
          </div>

          <div class="form-actions">
            <a class="btn-action btn-cancel" href="{{ url_for('calendario_list') }}">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13 1L1 13M1 1L13 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Cancelar
            </a>
            <a class="btn-action btn-back" href="{{ url_for('calendario_add', step=1) }}">
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8.5L1 8.5M1 8.5L9.5 16M1 8.5L9.5 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Voltar
            </a>
            <button class="btn-action btn-next" type="submit">
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 8.5H18M18 8.5L9.5 1M18 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Próximo
            </button>
          </div>
        </form>

        {% elif step == 3 %}
        <form class="wizard-form" method="post">
          <input type="hidden" name="step" value="3" />

          <div class="form-field-group">
            <label class="field-label">Dia da Semana:</label>
            <select class="field-select" name="dia_semana">
              <option value="">Selecione</option>
              <option value="segunda-feira" {% if wizard.dia_semana == 'segunda-feira' %}selected{% endif %}>Segunda-feira</option>
              <option value="terça-feira" {% if wizard.dia_semana == 'terça-feira' %}selected{% endif %}>Terça-feira</option>
              <option value="quarta-feira" {% if wizard.dia_semana == 'quarta-feira' %}selected{% endif %}>Quarta-feira</option>
              <option value="quinta-feira" {% if wizard.dia_semana == 'quinta-feira' %}selected{% endif %}>Quinta-feira</option>
              <option value="sexta-feira" {% if wizard.dia_semana == 'sexta-feira' %}selected{% endif %}>Sexta-feira</option>
            </select>
          </div>

          <div class="form-row-group">
            <div class="form-field-group">
              <label class="field-label">Horário Inicío:</label>
              <input class="field-input" name="hora_inicio" type="text" placeholder="Ex: 19h10" value="{{ wizard.hora_inicio or '' }}" />
            </div>
            <div class="form-field-group">
              <label class="field-label">Horário Fim:</label>
              <input class="field-input" name="hora_fim" type="text" placeholder="Ex: 22h40" value="{{ wizard.hora_fim or '' }}" />
            </div>
          </div>

          <div class="form-field-group">
            <label class="field-label">Sala:</label>
            <select class="field-select" name="sala">
              <option value="">Selecione</option>
              <option value="427" {% if wizard.sala == '427' %}selected{% endif %}>427</option>
              <option value="428" {% if wizard.sala == '428' %}selected{% endif %}>428</option>
            </select>
          </div>

          <div class="form-actions">
            <a class="btn-action btn-cancel" href="{{ url_for('calendario_list') }}">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13 1L1 13M1 1L13 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Cancelar
            </a>
            <a class="btn-action btn-back" href="{{ url_for('calendario_add', step=2) }}">
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8.5L1 8.5M1 8.5L9.5 16M1 8.5L9.5 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Voltar
            </a>
            <button class="btn-action btn-next" type="submit">
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 8.5H18M18 8.5L9.5 1M18 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Próximo
            </button>
          </div>
        </form>

        {% elif step == 4 %}
        <form class="wizard-form" method="post">
          <input type="hidden" name="step" value="4" />

          <div class="exam-section">
            <h3 class="exam-title">NP1</h3>
            <div class="form-field-group">
              <label class="field-label">NP1</label>
              <select class="field-select field-small" name="np1_data">
                <option value="">Selecione</option>
                <option value="15/01/2025">15/01/2025</option>
              </select>
            </div>
            <div class="form-row-group">
              <div class="form-field-group">
                <label class="field-label">Horário Inicío:</label>
                <input class="field-input" name="np1_inicio" type="text" placeholder="Ex: 19h10" />
              </div>
              <div class="form-field-group">
                <label class="field-label">Horário Fim:</label>
                <input class="field-input" name="np1_fim" type="text" placeholder="Ex: 20h45" />
              </div>
            </div>
            <div class="form-field-group">
              <label class="field-label">Sala:</label>
              <input class="field-input field-small" name="np1_sala" type="text" placeholder="Ex: 427" />
            </div>
            <div class="form-field-group">
              <label class="field-label">Aplicador(a):</label>
              <select class="field-select" name="np1_aplicador">
                <option value="">Selecione</option>
                <option value="José Zesinho">José Zesinho</option>
              </select>
            </div>
            <div class="form-field-group">
              <label class="field-label">Conteúdo da Prova</label>
              <div class="textarea-wrapper">
                <textarea class="field-textarea" name="np1_conteudo" rows="7" maxlength="250" placeholder="Insira os tópicos ou material de estudo para essa prova."></textarea>
                <span class="char-counter">0 / 250 caracteres</span>
              </div>
            </div>
          </div>

          <div class="exam-section">
            <h3 class="exam-title">NP2</h3>
            <div class="form-field-group">
              <label class="field-label">NP2</label>
              <select class="field-select field-small" name="np2_data">
                <option value="">Selecione</option>
                <option value="15/03/2025">15/03/2025</option>
              </select>
            </div>
            <div class="form-row-group">
              <div class="form-field-group">
                <label class="field-label">Horário Inicío:</label>
                <input class="field-input" name="np2_inicio" type="text" placeholder="Ex: 19h10" />
              </div>
              <div class="form-field-group">
                <label class="field-label">Horário Fim:</label>
                <input class="field-input" name="np2_fim" type="text" placeholder="Ex: 20h45" />
              </div>
            </div>
            <div class="form-field-group">
              <label class="field-label">Sala:</label>
              <input class="field-input field-small" name="np2_sala" type="text" placeholder="Ex: 427" />
            </div>
            <div class="form-field-group">
              <label class="field-label">Aplicador(a):</label>
              <select class="field-select" name="np2_aplicador">
                <option value="">Selecione</option>
                <option value="José Zesinho">José Zesinho</option>
              </select>
            </div>
            <div class="form-field-group">
              <label class="field-label">Conteúdo da Prova</label>
              <div class="textarea-wrapper">
                <textarea class="field-textarea" name="np2_conteudo" rows="7" maxlength="250" placeholder="Insira os tópicos ou material de estudo para essa prova."></textarea>
                <span class="char-counter">0 / 250 caracteres</span>
              </div>
            </div>
          </div>

          <div class="exam-section">
            <h3 class="exam-title">Exame</h3>
            <div class="form-field-group">
              <label class="field-label">Exame</label>
              <select class="field-select field-small" name="exame_data">
                <option value="">Selecione</option>
                <option value="15/06/2025">15/06/2025</option>
              </select>
            </div>
            <div class="form-row-group">
              <div class="form-field-group">
                <label class="field-label">Horário Inicío:</label>
                <input class="field-input" name="exame_inicio" type="text" placeholder="Ex: 19h10" />
              </div>
              <div class="form-field-group">
                <label class="field-label">Horário Fim:</label>
                <input class="field-input" name="exame_fim" type="text" placeholder="Ex: 20h45" />
              </div>
            </div>
            <div class="form-field-group">
              <label class="field-label">Sala:</label>
              <input class="field-input field-small" name="exame_sala" type="text" placeholder="Ex: 427" />
            </div>
            <div class="form-field-group">
              <label class="field-label">Aplicador(a):</label>
              <select class="field-select" name="exame_aplicador">
                <option value="">Selecione</option>
                <option value="José Zesinho">José Zesinho</option>
              </select>
            </div>
            <div class="form-field-group">
              <label class="field-label">Conteúdo da Prova</label>
              <div class="textarea-wrapper">
                <textarea class="field-textarea" name="exame_conteudo" rows="7" maxlength="250" placeholder="Insira os tópicos ou material de estudo para essa prova."></textarea>
                <span class="char-counter">0 / 250 caracteres</span>
              </div>
            </div>
          </div>

          <div class="exam-section">
            <h3 class="exam-title">Sub</h3>
            <div class="form-field-group">
              <label class="field-label">Sub</label>
              <select class="field-select field-small" name="sub_data">
                <option value="">Selecione</option>
                <option value="15/07/2025">15/07/2025</option>
              </select>
            </div>
            <div class="form-row-group">
              <div class="form-field-group">
                <label class="field-label">Horário Inicío:</label>
                <input class="field-input" name="sub_inicio" type="text" placeholder="Ex: 19h10" />
              </div>
              <div class="form-field-group">
                <label class="field-label">Horário Fim:</label>
                <input class="field-input" name="sub_fim" type="text" placeholder="Ex: 20h45" />
              </div>
            </div>
            <div class="form-field-group">
              <label class="field-label">Sala:</label>
              <input class="field-input field-small" name="sub_sala" type="text" placeholder="Ex: 427" />
            </div>
            <div class="form-field-group">
              <label class="field-label">Aplicador(a):</label>
              <select class="field-select" name="sub_aplicador">
                <option value="">Selecione</option>
                <option value="José Zesinho">José Zesinho</option>
              </select>
            </div>
            <div class="form-field-group">
              <label class="field-label">Conteúdo da Prova</label>
              <div class="textarea-wrapper">
                <textarea class="field-textarea" name="sub_conteudo" rows="7" maxlength="250" placeholder="Insira os tópicos ou material de estudo para essa prova."></textarea>
                <span class="char-counter">0 / 250 caracteres</span>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <a class="btn-action btn-back" href="{{ url_for('calendario_add', step=3) }}">
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8.5L1 8.5M1 8.5L9.5 16M1 8.5L9.5 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Voltar
            </a>
            <a class="btn-action btn-cancel" href="{{ url_for('calendario_list') }}">
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13 1L1 13M1 1L13 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Cancelar
            </a>
            <button class="btn-action btn-save" type="submit">
              <svg width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 1L6 12L1 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Salvar
            </button>
          </div>
        </form>
        {% endif %}
      </div>
    </div>
  </main>

</body>
</html>
