<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ materia.nome }} - Visualizar Matéria</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/calendario_styles.css') }}">
</head>
<body class="page-body">
  
  <header class="page-header">
    <div class="header-top">
      <div class="header-brand">
        <img class="header-logo" src="https://api.builder.io/api/v1/image/assets/TEMP/fb4d5eed694b229a53829dcdc98665ec0db0d36c?width=558" alt="UNIP">
        <h1 class="header-title">Painel Administrativo</h1>
      </div>
      <div class="header-user">
        <div class="user-info-panel">
          <div class="user-name-text">{{ user.nome|title if user else 'José Zesinho' }}</div>
          <div class="user-email-text">{{ user.email if user else 'jose.zesinho37@docente.unip.br' }}</div>
        </div>
        <a href="{{ url_for('logout') }}" class="btn-logout">sair</a>
      </div>
    </div>
    <div class="header-submenu">
      <div class="submenu-wrapper">
        <svg class="icon-menu" width="25" height="19" viewBox="0 0 25 19" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.9919 6.66468H1M23.9919 1H1M23.9919 12.3294H1M23.9919 17.994H1" stroke="white" stroke-width="1.9993" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="submenu-text">Menu</span>
      </div>
    </div>
  </header>

  <main class="page-main">
    <div class="materia-view-card">
      
      <div class="materia-menu-header">
        <h2 class="materia-view-title">{{ materia.nome }}</h2>
        <a href="{{ url_for('calendario_edit', materia_id=materia.id) }}" class="btn-edit-info">
          <svg class="icon-edit" width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M23.375 4.00008C23.7361 3.64989 24.1649 3.3721 24.6367 3.18258C25.1086 2.99305 25.6143 2.89551 26.125 2.89551C26.6357 2.89551 27.1414 2.99305 27.6133 3.18258C28.0851 3.3721 28.5139 3.64989 28.875 4.00008C29.2361 4.35027 29.5226 4.76601 29.7181 5.22355C29.9135 5.6811 30.0141 6.1715 30.0141 6.66674C30.0141 7.16199 29.9135 7.65239 29.7181 8.10993C29.5226 8.56748 29.2361 8.98322 28.875 9.33341L10.3125 27.3334L2.75 29.3334L4.8125 22.0001L23.375 4.00008Z" stroke="#2C8DFA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Editar Informações</span>
        </a>
        <div class="header-separator"></div>
      </div>

      <div class="general-info-grid">
        <div class="info-item">
          <div class="info-item-label">Cód. Disciplina:</div>
          <div class="info-item-value">{{ materia.codigo or 'N/A' }}</div>
        </div>
        <div class="info-item">
          <div class="info-item-label">Professor:</div>
          <div class="info-item-value">{{ materia.professor or 'N/A' }}</div>
        </div>
        <div class="info-item">
          <div class="info-item-label">Carga Horária:</div>
          <div class="info-item-value">{{ materia.carga_horaria or 'N/A' }}</div>
        </div>
        <div class="info-item">
          <div class="info-item-label">Tipo:</div>
          <div class="info-item-value">{{ materia.modalidade or 'N/A' }}</div>
        </div>
      </div>

      <div class="sections-container">
        
        <details class="section-details" open>
          <summary class="section-summary">Ementa da Matéria</summary>
          <div class="section-content ementa-content">
            <div class="ementa-text-box">
              <div class="ementa-text-wrapper">
                <h3 class="ementa-subtitle">Resumo Ementa</h3>
                <p class="ementa-description">{{ materia.ementa_resumo or 'Nenhum resumo disponível.' }}</p>
              </div>
            </div>
            {% if materia.ementa_arquivo_nome %}
            <div class="ementa-document-access">
              <div class="document-label">Acessar Documento:</div>
              <div class="document-link-wrapper">
                <svg class="icon-document" width="19" height="25" viewBox="0 0 19 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.625 1H3.125C2.56141 1 2.02091 1.24232 1.6224 1.67365C1.22388 2.10499 1 2.69 1 3.3V21.7C1 22.31 1.22388 22.895 1.6224 23.3263C2.02091 23.7577 2.56141 24 3.125 24H15.875C16.4386 24 16.9791 23.7577 17.3776 23.3263C17.7761 22.895 18 22.31 18 21.7V7.9M11.625 1L18 7.9M11.625 1V7.9H18M13.75 13.65H5.25M13.75 18.25H5.25M7.375 9.05H5.25" stroke="#023D71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <a href="#" class="document-link-text">{{ materia.ementa_arquivo_nome }}</a>
              </div>
            </div>
            {% endif %}
          </div>
        </details>

        <details class="section-details" open>
          <summary class="section-summary">Calendário e Horários</summary>
          <div class="section-content calendario-content">
            <div class="calendario-info-row">
              <div class="calendario-field">
                <span class="calendario-field-label">Dia da semana:</span>
                <span class="calendario-field-value">{{ materia.dia_semana or 'N/A' }}</span>
              </div>
              <div class="calendario-field">
                <span class="calendario-field-label">Período:</span>
                <span class="calendario-field-value">Noturno</span>
              </div>
            </div>
            <div class="calendario-info-row">
              <div class="calendario-field">
                <span class="calendario-field-label">Horário Início:</span>
                <span class="calendario-field-value">{{ materia.hora_inicio or 'N/A' }}</span>
              </div>
              <div class="calendario-field">
                <span class="calendario-field-label">Horário Fim:</span>
                <span class="calendario-field-value">{{ materia.hora_fim or 'N/A' }}</span>
              </div>
            </div>
            <div class="calendario-info-row">
              <div class="calendario-field">
                <span class="calendario-field-label">Sala:</span>
                <span class="calendario-field-value">{{ materia.sala or 'N/A' }}</span>
              </div>
              <div class="calendario-field">
                <span class="calendario-field-label">Bloco:</span>
                <span class="calendario-field-value">B</span>
              </div>
            </div>
          </div>
        </details>

        <details class="section-details" open>
          <summary class="section-summary">Avaliações e Prazos</summary>
          <div class="section-content avaliacoes-content">
            
            {% if materia.provas %}
              {% for prova_key, prova in materia.provas.items() %}
                {% if prova.data %}
                <div class="avaliacao-block">
                  <h3 class="avaliacao-title">{{ prova_key|upper }}</h3>
                  <div class="avaliacao-info-row">
                    <div class="avaliacao-field">
                      <span class="avaliacao-field-label">Data:</span>
                      <span class="avaliacao-field-value">{{ prova.data }}</span>
                    </div>
                    <div class="avaliacao-field">
                      <span class="avaliacao-field-label">Horário:</span>
                      <span class="avaliacao-field-value">{{ prova.inicio }}</span>
                    </div>
                  </div>
                  <div class="avaliacao-info-row">
                    <div class="avaliacao-field">
                      <span class="avaliacao-field-label">Sala:</span>
                      <span class="avaliacao-field-value">{{ prova.sala }}</span>
                    </div>
                    <div class="avaliacao-field">
                      <span class="avaliacao-field-label">Aplicador(a):</span>
                      <span class="avaliacao-field-value">{{ prova.aplicador }}</span>
                    </div>
                  </div>
                  <div class="avaliacao-description">
                    <div class="avaliacao-description-label">Conteúdo da Prova:</div>
                    <p class="avaliacao-description-text">{{ prova.conteudo or 'Conteúdo não especificado.' }}</p>
                  </div>
                </div>
                {% endif %}
              {% endfor %}
            {% else %}
              <p class="empty-message">Nenhuma avaliação cadastrada.</p>
            {% endif %}

          </div>
        </details>

      </div>

    </div>
  </main>

</body>
</html>
