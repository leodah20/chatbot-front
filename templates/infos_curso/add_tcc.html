<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Adicionar TCC - UNIP</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/infos_curso_styles.css') }}">
</head>
<body class="page-body">
  <header class="page-header">
    <div class="header-top">
      <div class="header-brand">
        <img class="header-logo" src="https://api.builder.io/api/v1/image/assets/TEMP/fb4d5eed694b229a53829dcdc98665ec0db0d36c?width=558" alt="UNIP">
        <h1 class="header-title">Painel Administrativo</h1>
      </div>
      <div class="header-user">
        <div class="user-info-panel">
          <div class="user-name-text">{{ user.nome|title if user else 'Usuário' }}</div>
          <div class="user-email-text">{{ user.email if user else 'email@unip.br' }}</div>
        </div>
        <a href="{{ url_for('logout') }}" class="btn-logout">sair</a>
      </div>
    </div>
    <div class="header-submenu">
      <div class="submenu-wrapper">
        <svg class="icon-menu" viewBox="0 0 25 19" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.9915 6.66419H0.999512M23.9915 0.999512H0.999512M23.9915 12.3289H0.999512M23.9915 17.9936H0.999512" stroke="white" stroke-width="1.9993" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="submenu-text">Menu</span>
      </div>
    </div>
  </header>

  <main class="page-main">
    <div class="add-form-container">
      <div class="add-form-header">
        <h2 class="add-form-title">Informações do Curso</h2>
      </div>

      <div class="add-section-header">
        <svg class="icon-add-circle" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M28 18V38M18 28H38M53 28C53 41.8071 41.8071 53 28 53C14.1929 53 3 41.8071 3 28C3 14.1929 14.1929 3 28 3C41.8071 3 53 14.1929 53 28Z" stroke="#1583FF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="add-section-text">Adicionar</span>
      </div>

      <div class="blue-divider"></div>

      <div class="form-group-select">
        <label class="form-label-blue">Tipo de Informação:</label>
        <div class="form-select-readonly">TCC</div>
      </div>

      {% if step == 1 %}
      <form method="POST" class="info-form-card">
        <div class="form-fields-container">
          <div class="wizard-step-title">TC I - Dados de Orientação</div>
          <div class="form-row-double">
            <div class="form-group">
              <label class="form-label-dark">Professor(a) Responsável</label>
              <input type="text" name="professor_tc1" class="form-input-field" placeholder="Nome do professor(a)" required>
            </div>
            <div class="form-group">
              <label class="form-label-dark">Dia e Horário de Orientação</label>
              <input type="text" name="horario_tc1" class="form-input-field" placeholder="Ex: Terças, 18h às 19h" required>
            </div>
          </div>

          <div class="form-group-full">
            <label class="form-label-dark">Regras e Diretrizes</label>
            <textarea name="regras_tc1" class="form-textarea-field" maxlength="1200" placeholder="Descreva as regras de TC I" required></textarea>
            <div class="char-counter">Máx. 1200 caracteres</div>
          </div>
        </div>

        <div class="form-actions">
          <a href="{{ url_for('infos_curso_add') }}" class="btn-cancel">
            <svg class="btn-icon" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13 1L1 13M1 1L13 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Cancelar</span>
          </a>
          <button type="submit" name="action" value="next" class="btn-next">
            <svg class="btn-icon" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 8.5H18M18 8.5L9.5 1M18 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Próximo</span>
          </button>
        </div>
      </form>
      {% elif step == 2 %}
      <form method="POST" class="info-form-card">
        <div class="form-fields-container">
          <div class="wizard-step-title">TC II - Dados de Orientação</div>
          <div class="form-row-double">
            <div class="form-group">
              <label class="form-label-dark">Professor(a) Responsável</label>
              <input type="text" name="professor_tc2" class="form-input-field" placeholder="Nome do professor(a)" required>
            </div>
            <div class="form-group">
              <label class="form-label-dark">Dia e Horário de Orientação</label>
              <input type="text" name="horario_tc2" class="form-input-field" placeholder="Ex: Quintas, 20h às 21h" required>
            </div>
          </div>

          <div class="form-group-full">
            <label class="form-label-dark">Regras e Diretrizes</label>
            <textarea name="regras_tc2" class="form-textarea-field" maxlength="1200" placeholder="Descreva as regras de TC II" required></textarea>
            <div class="char-counter">Máx. 1200 caracteres</div>
          </div>

          <div class="tcc-schedule">
            <div class="section-title">Cronograma de Entregas</div>
            <div class="tcc-schedule-item">
              <div class="tcc-schedule-title">Revisões</div>
              <div class="form-row-double">
                <div class="form-group">
                  <label class="form-label-dark">1ª Revisão</label>
                  <input type="date" name="rev1_data" class="form-input-field" required>
                </div>
                <div class="form-group">
                  <label class="form-label-dark">2ª Revisão</label>
                  <input type="date" name="rev2_data" class="form-input-field" required>
                </div>
              </div>
            </div>
            <div class="tcc-date-row">
              <div class="tcc-date-field">
                <span class="field-label">Banca Final</span>
                <input type="date" name="banca_final" class="form-input-field" required>
              </div>
              <div class="tcc-date-field">
                <span class="field-label">Entrega Final</span>
                <input type="date" name="entrega_final" class="form-input-field" required>
              </div>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" name="action" value="back" class="btn-back">
            <svg class="btn-icon" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 8.5H1M1 8.5L9.5 1M1 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Voltar</span>
          </button>
          <button type="submit" name="action" value="next" class="btn-next">
            <svg class="btn-icon" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 8.5H18M18 8.5L9.5 1M18 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Próximo</span>
          </button>
        </div>
      </form>
      {% else %}
      <form method="POST" enctype="multipart/form-data" class="info-form-card">
        <div class="form-fields-container">
          <div class="wizard-step-title">Documentações e Confirmação</div>
          <div class="doc-section">
            <div class="doc-header">
              <svg class="icon-doc" viewBox="0 0 30 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.375 1.5H4.875C3.97989 1.5 3.12145 1.81607 2.48851 2.37868C1.85558 2.94129 1.5 3.70435 1.5 4.5V28.5C1.5 29.2956 1.85558 30.0587 2.48851 30.6213C3.12145 31.1839 3.97989 31.5 4.875 31.5H25.125C26.0201 31.5 26.8785 31.1839 27.5115 30.6213C28.1444 30.0587 28.5 29.2956 28.5 28.5V10.5M18.375 1.5L28.5 10.5M18.375 1.5V10.5H28.5M15 25.5V16.5M9.9375 21H20.0625" stroke="#1583FF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="doc-title">Envio de Manuais</span>
            </div>
            <div class="form-group-full">
              <label class="form-label-dark">Manual do TCC (PDF)</label>
              <div class="file-upload-area">
                <label for="file-tcc" class="file-upload-button">Selecionar Arquivo</label>
                <input type="file" id="file-tcc" name="manual_tcc" accept=".pdf,.docx" hidden>
                <span class="file-upload-hint">Apenas .pdf ou .docx</span>
                <div id="file-tcc-name" class="file-name-display"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" name="action" value="back" class="btn-back">
            <svg class="btn-icon" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18 8.5H1M1 8.5L9.5 1M1 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Voltar</span>
          </button>
          <button type="submit" name="action" value="save" class="btn-save">
            <svg class="btn-icon" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 8.5H18M18 8.5L9.5 1M18 8.5L9.5 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Salvar</span>
          </button>
        </div>
      </form>
      {% endif %}
    </div>
  </main>

  <script>
    const fileInput = document.getElementById('file-tcc');
    if (fileInput) {
      fileInput.addEventListener('change', function(e) {
        const fileName = e.target.files[0]?.name || '';
        const display = document.getElementById('file-tcc-name');
        if (fileName) {
          display.textContent = `Arquivo selecionado: ${fileName}`;
          display.style.display = 'block';
        } else {
          display.style.display = 'none';
        }
      });
    }
  </script>
</body>
</html>
