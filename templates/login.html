<!doctype html>
<html lang="pt-BR">
<head>
    <!-- Configuração básica da página -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - Painel Admin Chatbot</title>
    
    <!-- Carregamento otimizado de fontes Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet" />
    
    <!-- CSS específico da página de login -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login_styles.css') }}" />
    
    <!-- Sistema de Toasts -->
    {% include '_toasts.html' %}
</head>
<body>
    <main class="page">
      <section class="container">
        <!-- Logo da UNIP -->
        <img
          class="logo"
          src="https://api.builder.io/api/v1/image/assets/TEMP/dca42af74849142d727a41685e465a6b5dc99c42?width=533"
          alt="UNIP"
          width="266"
          height="85"
        />
        
        <!-- Títulos da página -->
        <h1 class="title">Área Administrativa</h1>
        <h2 class="subtitle">ChatBot</h2>

        <!-- Sistema de mensagens flash (processado pelo sistema de toasts) -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages" style="display: none;"> 
                    {% for category, message in messages %}
                        <div class="flash-message-item {{ 'bg-red-100 text-red-700' if category == 'error' else 'bg-blue-100 text-blue-700' if category == 'info' else 'bg-green-100 text-green-700' if category == 'success' else 'bg-yellow-100 text-yellow-700' }}" data-category="{{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- Formulário de login -->
        <form class="form" action="{{ url_for('login') }}" method="post">
          <!-- Campo de email -->
          <label class="sr-only" for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="Email" required class="input" />

          <!-- Campo de senha -->
          <label class="sr-only" for="senha">Senha</label>
          <div class="password-wrapper">
            <input id="senha" name="password" type="password" placeholder="Senha" required class="input" />
            <button type="button" class="password-toggle" id="togglePassword" aria-label="Mostrar senha">
              <svg class="password-icon password-icon-visible" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="#738AA7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="12" r="3" stroke="#738AA7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg class="password-icon password-icon-hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                <path d="M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06M9.9 4.24C10.5883 4.0789 11.2931 3.99836 12 4C19 4 23 12 23 12C22.393 13.1356 21.6691 14.2048 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1751 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.5719 9.14351 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2218 9.18488 10.8538C9.34884 10.4859 9.58525 10.1546 9.88 9.88M1 1L23 23" stroke="#738AA7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>

          <!-- Botão de submissão -->
          <button type="submit" class="btn-primary">Entrar</button>
        </form>
      </section>
    </main>

    <!-- Script para revelar/ocultar senha -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const passwordInput = document.getElementById('senha');
        const toggleButton = document.getElementById('togglePassword');
        const iconVisible = toggleButton.querySelector('.password-icon-visible');
        const iconHidden = toggleButton.querySelector('.password-icon-hidden');
        
        toggleButton.addEventListener('click', function() {
          // Alterna entre tipo password e text
          if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            iconVisible.style.display = 'none';
            iconHidden.style.display = 'block';
            toggleButton.setAttribute('aria-label', 'Ocultar senha');
          } else {
            passwordInput.type = 'password';
            iconVisible.style.display = 'block';
            iconHidden.style.display = 'none';
            toggleButton.setAttribute('aria-label', 'Mostrar senha');
          }
        });
      });
    </script>
</body>
</html>